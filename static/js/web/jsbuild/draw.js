
    var cumulative = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,1813179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,8213179,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9006979,9376979,9376979,9376979,9376979,9376979,13085990,13085990,13085990,13085990,13085990,13085990,13085990,13085990,13085990,13085990,13585990,13585990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,32085990,33165990,33165990,33165990,33165990,33165990,33165990,33165990,33165990,33165990,33165990,33165990,33165990,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,35575530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36115530,36856030,36856030,36856030,36856030,36856030,36856030,36856030,36856030,36856030,36856030,36856030,36856030,36856030,36856030,36856030,36856030,36856030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,37446030,38306435,38306435,38306435,38306435,38306435,38306435,38306435,38306435,38306435,38306435,38306435,38306435,38306435,38306435,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,38845729,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,39378629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,44678629,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45263914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,45563914,52063914,52063914,52063914,52063914,52063914,52063914,52063914,52063914,52063914,57563914,57563914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58063914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,58493914,60901815,60901815,60901815,60901815,60901815,60901815,60901815,60901815,60901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,228901815,230110341,230110341,231251290,231251290,231251290,231251290,231251290,231251290,231251290,231251290,231251290,231251290,231251290,231251290,231251290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,231811290,232486290,232486290,232486290,232486290,235100573,235100573,235100573,235100573,235100573,235100573,235100573,235100573,235100573,235100573,235100573,235100573,235100573,235100573,235100573,235100573,235100573,236000573,236000573,244870940,246009940,246009940,246009940,246009940,246009940,246009940,246009940,246009940,246009940,246109940,246109940,246109940,246109940,246301796,246301796,246301796,246301796,249301796,249301796,253136196,255136196,255136196,255136196,255136196,255136196,255136196,255136196,255811196,255811196,255811196,255811196,255811196,255811196,255811196,255811196,255811196,255811196,255811196,261311196,261311196,261311196,271993712,271993712,271993712,271993712,271993712,271993712,271993712,271993712,272173680,272173680,272173680,272173680,272173680,272173680,272173680,272173680,272173680,272173680,272173680,272173680,276875080,276875080,276875080,276875080,276875080,276875080,276875080,276875080,277015080,277015080,284717689,284717689,284717689,284717689,284717689,284717689,284717689,284717689,284717689,284717689,284717689,284717689,292480491,292480491,292480491,301080491,301080491,301080491,301080491,301080491,301080491,301080491,301080491,301080491,301080491,301080491,302390491,302390491,302557191,302557191,303398541,304247665,304647665,304997665,304997665,304997665,304997665,304997665,304997665,304997665,304997665,304997665,304997665,304997665,305997665,305997665,305997665,308277414,310772414,310772414,310772414,310772414,310772414,310772414,312257049,312257049,312257049,312257049,312257049,312257049,312557049,312557049,312557049,312557049,312557049,312557049,312557049,313657049,313657049,315731049,315731049,315731049,315731049,318131049,318131049,318131049,318131049,318131049,318131049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,318381049,322381049,322381049,327781049,327781049,327781049,327781049,327781049,327781049,327781049,327781049,327781049,327781049,327781049,328126548,328493626,340861800,341951800,341951800,341951800,341951800,341951800,341951800,341951800,341951800,341951800,341951800,341951800,341951800,341951800,344851800,344851800,344851800,344851800,344851800,344851800,344851800,347551800,347551800,347551800,347551800,347551800,347551800,347936219,347936219,347936219,348126219,348126219,348126219,348126219,348126219,353684528,353684528,370844646,370844646,370844646,370844646,370970854,371150854,371150854,371150854,376430254,378583487,394499568,396299568,396299568,396299568,396299568,396299568,396299568,396299568,408784568,408784568,409729568,414892568,426326462,426326462,426688288,427038288,439738288,439738288,439738288,439738288,439738288,439738288,439738288,439738288,449948544,449948544,464754949,464754949,464754949,474660307,474660307,499660307,499660307,499910307,501910307,501910307,501910307,502310307,507590307,560660307,579283265,611697507,611697507,611697507,626097507,694600695,695810695,695810695,703010695,703010695,703010695,705741193,705741193,705741193,706616193,708131227,718010664,718010664,718010664,718729933,718729933,718729933,718729933,743729933,811729933,830775461,830775461,830775461,833775461,833775461,989520534,1017449072,1025389088,1058389088,1058389088,1084899367,1089419367,1094519367,1109519367,1242122879,1270218449,1302788449,1328788449,1337788449,1338558449,1338558449,1339113462,1339113462,1339113462,1586371380,1830155293,1830155293,1830317802,1913612702,1913612702,1914044947,1939810392,1939810392,1941702190,2024813008,2024813008,2056457696,2059071123,2074071123,2082071123,2082371123,2111842864,2124402004,2137592004,2142736654,2155365950,2155365950,2159865950,2171928547,2171928547,2171928547,2174226198,2182968083,2189807714,2189807714,2198807714,2214729745,2312163010,2332163010,2395952103,2421560900,2448060900,2448060900,2506919548,2506919548,2508677426,2515524988,2530598485,2539668843,2540639647,2546616969,2558745141,2646649028,2668066742,2668066742,2668066742,2696418671,2717800269,2717800269,2727553395,2760775302,2761442678,3110553140,3113227538,3113327538,3139505612,3165819352,3217153524,3231527534,3280570038,3280570038,3289327942,3297166126,3297583641,3353820834,3356882752,3364340270,3365707546,3468551938,3476811575,3477373697,3515745570,3619444795,3643379996,3643736023,3658736023,3670736023,3709790857,3765211132,3765453186,3787272701,3787272701,3804212294,3972012294,4028523975,4031295430,4031295430,4048125318,4267023457,4374499309,4407726809,4442255628,4460932377,4465074955,4498032285,4562315639,4562315639,4596736788,4635980715,4768460024,4774856925,4780379594,4804131806,5012725124,5035534711,5036744738,5090293472,5107384335,5112363756,5228168339,5268418214,5268729710,5390947792,5422473380,5438117063,5482870761,5483359020,5483693013,5563660460,5567044722,5609917934,5662477153,5664070342,5808650158,5819931868,5904222220,5919400753,5960997918,5981039934,6012533604,6022526945,6039108148,6196373816,6391007041]

    var icodata = [
        ["",162109,"$162k","Africa","2017-11-17",43056,46],
        ["",240000,"$240k","Africa","2017-9-11",42989,44],
        ["",1090000,"$1m","Africa","2017-3-1",42795,38],
        ["",129218,"$129k","Asia","2017-11-15",43054,46],
        ["",142869,"$143k","Asia","2017-11-14",43053,46],
        ["",158423,"$158k","Asia","2017-10-20",43028,45],
        ["",299872,"$300k","Asia","2017-8-31",42978,43],
        ["",328560,"$329k","Asia","2017-9-30",43008,44],
        ["",500000,"$500k","Asia","2017-11-2",43041,46],
        ["",667376,"$667k","Asia","2017-9-9",42987,44],
        ["",943004,"$1m","Asia","2017-11-30",43069,46],
        ["",1000000,"$1m","Asia","2017-10-21",43029,45],
        ["",1121632,"$1m","Asia","2017-10-20",43028,45],
        ["",1335864,"$1m","Asia","2017-11-28",43067,46],
        ["",1463758,"$1m","Asia","2017-8-24",42971,43],
        ["",1566520,"$2m","Asia","2017-7-31",42947,42],
        ["",1589730,"$2m","Asia","2017-9-5",42983,44],
        ["",1800000,"$2m","Asia","2017-11-20",43059,46],
        ["",1891798,"$2m","Asia","2017-7-23",42939,42],
        ["",1980000,"$2m","Asia","2017-11-29",43068,46],
        ["",2021034,"$2m","Asia","2017-10-16",43024,45],
        ["",2290929,"$2m","Asia","2017-11-15",43054,46],
        ["",2329000,"$2m","Asia","2017-9-30",43008,44],
        ["",2556293,"$3m","Asia","2017-8-1",42948,43],
        ["",2787660,"$3m","Asia","2017-11-25",43064,46],
        ["",2950000,"$3m","Asia","2017-8-29",42976,43],
        ["",3000000,"$3m","Asia","2016-9-5",42618,32],
        ["",3043950,"$3m","Asia","2017-11-30",43069,46],
        ["",3120000,"$3m","Asia","2017-9-17",42995,44],
        ["",3168713,"$3m","Asia","2017-9-8",42986,44],
        ["",3834400,"$4m","Asia","2016-9-7",42620,32],
        ["",4334489,"$4m","Asia","2017-11-11",43050,46],
        ["",4437070,"$4m","Asia","2017-10-15",43023,45],
        ["",4500000,"$5m","Asia","2017-8-6",42953,43],
        ["",4600000,"$5m","Asia","2017-9-30",43008,44],
        ["",5450887,"$5m","Asia","2017-8-11",42958,43],
        ["",5500000,"$6m","Asia","2016-3-30",42459,26],
        ["",5830856,"$6m","Asia","2017-11-25",43064,46],
        ["",6612303,"$7m","Asia","2017-8-12",42959,43],
        ["",6720000,"$7m","Asia","2017-11-7",43046,46],
        ["",7963120,"$8m","Asia","2017-4-28",42853,39],
        ["",8259637,"$8m","Asia","2017-9-27",43005,44],
        ["",8300000,"$8m","Asia","2017-9-30",43008,44],
        ["",8654102,"$9m","Asia","2017-9-19",42997,44],
        ["",8870367,"$9m","Asia","2016-8-18",42600,31],
        ["",9000000,"$9m","Asia","2017-11-24",43063,46],
        ["",9600000,"$10m","Asia","2017-10-5",43013,45],
        ["",9613624,"$10m","Asia","2017-9-8",42986,44],
        ["",10000000,"$10m","Asia","2017-8-22",42969,43],
        ["",10500000,"$11m","Asia","2017-11-18",43057,46],
        ["",11000000,"$11m","Asia","2017-8-19",42966,43],
        ["",11000000,"$11m","Asia","2017-8-26",42973,43],
        ["",11362000,"$11m","Asia","2017-11-30",43069,46],
        ["",11500000,"$12m","Asia","2017-11-30",43069,46],
        ["",11693521,"$12m","Asia","2017-8-31",42978,43],
        ["",13511852,"$14m","Asia","2017-10-17",43025,45],
        ["",14400000,"$14m","Asia","2017-11-23",43062,46],
        ["Binance",15000000,"$15m","Asia","2017-7-3",42919,42],
        ["Red Pulse",15000000,"$15m","Asia","2017-11-7",43046,46],
        ["Smart Mesh",15387158,"$15m","Asia","2017-11-29",43068,46],
        ["Paycent",15525000,"$16m","Asia","2017-11-30",43069,46],
        ["Walton",15702397,"$16m","Asia","2017-8-15",42962,43],
        ["Qtum",15916081,"$16m","Asia","2017-4-16",42841,39],
        ["Maecenas",16036235,"$16m","Asia","2017-10-8",43016,45],
        ["Eventchain",16376063,"$16m","Asia","2017-11-17",43056,46],
        ["Change",17500000,"$18m","Asia","2017-10-16",43024,45],
        ["Boscoin",18000000,"$18m","Asia","2017-6-20",42906,41],
        ["Open ANX",19215512,"$19m","Asia","2017-7-4",42920,42],
        ["LAToken",19600000,"$20m","Asia","2017-10-11",43019,45],
        ["Simple Token",20000000,"$20m","Asia","2017-11-20",43059,46],
        ["Target Coin",20711412,"$21m","Asia","2017-9-1",42979,44],
        ["FinShi",21420275,"$21m","Asia","2017-10-6",43014,45],
        ["Everex",21851930,"$22m","Asia","2017-9-4",42982,44],
        ["Enjin Coin",23000000,"$23m","Asia","2017-10-31",43039,45],
        ["OmiseGO",25000000,"$25m","Asia","2017-7-5",42921,42],
        ["Bitclave",25547000,"$26m","Asia","2017-11-29",43068,46],
        ["Funfair",26000000,"$26m","Asia","2017-7-7",42923,42],
        ["Cyber Miles",32046381,"$32m","Asia","2017-11-22",43061,46],
        ["MCAP",32414242,"$32m","Asia","2017-5-27",42882,40],
        ["Wanchain",35990000,"$36m","Asia","2017-11-3",43042,46],
        ["Cryptaur",36553300,"$37m","Asia","2017-11-30",43069,46],
        ["ICON",43545000,"$44m","Asia","2017-11-20",43059,46],
        ["Loopring",45000000,"$45m","Asia","2017-8-16",42963,43],
        ["VeChain",49451873,"$49m","Asia","2017-8-31",42978,43],
        ["Kyber",60000000,"$60m","Asia","2017-10-17",43025,45],
        ["Tronix",70000000,"$70m","Asia","2017-9-10",42988,44],
        ["PressOne",82000000,"$82m","Asia","2017-7-18",42934,42],
        ["TenX",83110818,"$83m","Asia","2017-7-24",42940,42],
        ["COMSA",95614242,"$96m","Asia","2017-11-6",43045,46],
        ["QASH",111881000,"$112m","Asia","2017-11-9",43048,46],
        ["",160000,"$160k","Caribbean","2017-9-28",43006,44],
        ["",285918,"$286k","Caribbean","2017-7-14",42930,42],
        ["",1033340,"$1m","Caribbean","2017-8-7",42954,43],
        ["",1917642,"$2m","Caribbean","2017-8-10",42957,43],
        ["",1932319,"$2m","Caribbean","2017-11-17",43056,46],
        ["",2255201,"$2m","Caribbean","2017-9-30",43008,44],
        ["",3095569,"$3m","Caribbean","2017-7-5",42921,42],
        ["",3228495,"$3m","Caribbean","2017-11-5",43044,46],
        ["",8000000,"$8m","Caribbean","2017-7-29",42945,42],
        ["",8322147,"$8m","Caribbean","2017-11-28",43067,46],
        ["",10234214,"$10m","Caribbean","2017-9-15",42993,44],
        ["",12000000,"$12m","Caribbean","2017-6-26",42912,41],
        ["",13440705,"$13m","Caribbean","2017-10-23",43031,45],
        ["Nimiq",15000000,"$15m","Caribbean","2017-7-28",42944,42],
        ["Blockmason",15300000,"$15m","Caribbean","2017-10-16",43024,45],
        ["Decent Bet",15686849,"$16m","Caribbean","2017-10-23",43031,45],
        ["Crypto20",40000000,"$40m","Caribbean","2017-11-30",43069,46],
        ["",100000,"$100k","Europe","2017-9-12",42990,44],
        ["",100060,"$100k","Europe","2017-10-20",43028,45],
        ["",103771,"$104k","Europe","2017-10-31",43039,45],
        ["",110824,"$111k","Europe","2017-11-22",43061,46],
        ["",138959,"$139k","Europe","2017-11-19",43058,46],
        ["",160582,"$161k","Europe","2017-10-1",43009,45],
        ["",166700,"$167k","Europe","2016-11-26",42700,34],
        ["",173816,"$174k","Europe","2017-10-15",43023,45],
        ["",175256,"$175k","Europe","2017-11-17",43056,46],
        ["",179968,"$180k","Europe","2016-10-7",42650,33],
        ["",191125,"$191k","Europe","2017-11-14",43053,46],
        ["",224858,"$225k","Europe","2017-11-30",43069,46],
        ["",228412,"$228k","Europe","2017-10-1",43009,45],
        ["",242054,"$242k","Europe","2017-10-7",43015,45],
        ["",245482,"$245k","Europe","2017-11-3",43042,46],
        ["",250000,"$250k","Europe","2016-12-1",42705,35],
        ["",263458,"$263k","Europe","2017-11-24",43063,46],
        ["",271285,"$271k","Europe","2017-10-31",43039,45],
        ["",294629,"$295k","Europe","2017-9-20",42998,44],
        ["",296753,"$297k","Europe","2017-9-28",43006,44],
        ["",300000,"$300k","Europe","2016-1-30",42399,24],
        ["",307942,"$308k","Europe","2017-11-3",43042,46],
        ["",311000,"$311k","Europe","2017-10-16",43024,45],
        ["",311496,"$311k","Europe","2017-11-8",43047,46],
        ["",328276,"$328k","Europe","2017-11-25",43064,46],
        ["",345435,"$345k","Europe","2017-11-21",43060,46],
        ["",350000,"$350k","Europe","2017-5-1",42856,40],
        ["",351102,"$351k","Europe","2017-9-30",43008,44],
        ["",360620,"$361k","Europe","2017-9-15",42993,44],
        ["",362862,"$363k","Europe","2017-11-21",43060,46],
        ["",400000,"$400k","Europe","2016-11-30",42704,34],
        ["",400000,"$400k","Europe","2017-9-25",43003,44],
        ["",412641,"$413k","Europe","2017-9-30",43008,44],
        ["",432246,"$432k","Europe","2017-7-20",42936,42],
        ["",455645,"$456k","Europe","2017-11-15",43054,46],
        ["",488259,"$488k","Europe","2017-11-13",43052,46],
        ["",500000,"$500k","Europe","2017-8-31",42978,43],
        ["",532900,"$533k","Europe","2015-9-1",42248,20],
        ["",550000,"$550k","Europe","2017-10-29",43037,45],
        ["",555013,"$555k","Europe","2017-7-11",42927,42],
        ["",585285,"$585k","Europe","2015-12-21",42359,23],
        ["",600462,"$600k","Europe","2017-9-10",42988,44],
        ["",613125,"$613k","Europe","2017-11-30",43069,46],
        ["",619807,"$620k","Europe","2017-8-25",42972,43],
        ["",646652,"$647k","Europe","2017-11-30",43069,46],
        ["",657658,"$658k","Europe","2017-10-16",43024,45],
        ["",675000,"$675k","Europe","2016-7-26",42577,30],
        ["",675000,"$675k","Europe","2016-9-15",42628,32],
        ["",719269,"$719k","Europe","2017-6-14",42900,41],
        ["",722539,"$723k","Europe","2017-11-21",43060,46],
        ["",770409,"$770k","Europe","2017-11-30",43069,46],
        ["",786390,"$786k","Europe","2017-11-4",43043,46],
        ["",851342,"$851k","Europe","2017-10-15",43023,45],
        ["",860405,"$860k","Europe","2015-4-30",42124,15],
        ["",900000,"$1m","Europe","2016-8-16",42598,31],
        ["",900000,"$1m","Europe","2017-10-18",43026,45],
        ["",938806,"$1m","Europe","2017-11-24",43063,46],
        ["",981597,"$1m","Europe","2017-10-31",43039,45],
        ["",1057892,"$1m","Europe","2017-10-25",43033,45],
        ["",1113751,"$1m","Europe","2017-10-15",43023,45],
        ["",1120743,"$1m","Europe","2017-10-28",43036,45],
        ["",1140422,"$1m","Europe","2017-10-21",43029,45],
        ["",1210000,"$1m","Europe","2017-6-1",42887,41],
        ["",1282650,"$1m","Europe","2017-5-15",42870,40],
        ["",1327500,"$1m","Europe","2017-10-18",43026,45],
        ["",1362203,"$1m","Europe","2017-6-6",42892,41],
        ["",1368295,"$1m","Europe","2017-6-6",42892,41],
        ["",1698400,"$2m","Europe","2017-6-11",42897,41],
        ["",1750926,"$2m","Europe","2017-11-5",43044,46],
        ["",1751444,"$2m","Europe","2017-6-30",42916,41],
        ["",1759130,"$2m","Europe","2017-10-12",43020,45],
        ["",1800000,"$2m","Europe","2017-4-17",42842,39],
        ["",1836000,"$2m","Europe","2017-10-20",43028,45],
        ["",1923507,"$2m","Europe","2017-11-1",43040,46],
        ["",2074000,"$2m","Europe","2017-1-6",42741,36],
        ["",2129106,"$2m","Europe","2017-11-30",43069,46],
        ["",2157471,"$2m","Europe","2017-10-15",43023,45],
        ["",2159067,"$2m","Europe","2017-11-27",43066,46],
        ["",2201585,"$2m","Europe","2017-11-3",43042,46],
        ["",2222482,"$2m","Europe","2017-10-19",43027,45],
        ["",2400000,"$2m","Europe","2017-1-10",42745,36],
        ["",2407901,"$2m","Europe","2016-5-19",42509,28],
        ["",2434398,"$2m","Europe","2017-9-11",42989,44],
        ["",2532405,"$3m","Europe","2017-10-25",43033,45],
        ["",2573627,"$3m","Europe","2017-9-29",43007,44],
        ["",2670000,"$3m","Europe","2017-11-27",43066,46],
        ["",2700000,"$3m","Europe","2017-3-21",42815,38],
        ["",2827944,"$3m","Europe","2017-11-21",43060,46],
        ["",2836732,"$3m","Europe","2017-11-15",43054,46],
        ["",2900000,"$3m","Europe","2017-3-14",42808,38],
        ["",3000000,"$3m","Europe","2017-6-23",42909,41],
        ["",3000000,"$3m","Europe","2017-10-23",43031,45],
        ["",3027322,"$3m","Europe","2017-8-29",42976,43],
        ["",3036000,"$3m","Europe","2017-8-16",42963,43],
        ["",3061918,"$3m","Europe","2017-9-23",43001,44],
        ["",3120102,"$3m","Europe","2017-8-27",42974,43],
        ["",3219299,"$3m","Europe","2017-11-20",43059,46],
        ["",3384262,"$3m","Europe","2017-11-16",43055,46],
        ["",3600000,"$4m","Europe","2017-9-30",43008,44],
        ["",3883333,"$4m","Europe","2017-11-27",43066,46],
        ["",3900000,"$4m","Europe","2017-7-4",42920,42],
        ["",4017769,"$4m","Europe","2017-11-30",43069,46],
        ["",4073497,"$4m","Europe","2017-8-26",42973,43],
        ["",4089951,"$4m","Europe","2017-11-18",43057,46],
        ["",4188968,"$4m","Europe","2016-11-10",42684,34],
        ["",4520000,"$5m","Europe","2017-7-1",42917,42],
        ["",4777951,"$5m","Europe","2017-11-10",43049,46],
        ["",4792435,"$5m","Europe","2017-11-10",43049,46],
        ["",5010109,"$5m","Europe","2017-11-30",43069,46],
        ["",5050000,"$5m","Europe","2017-6-30",42916,41],
        ["",5100000,"$5m","Europe","2017-7-2",42918,42],
        ["",5144650,"$5m","Europe","2017-8-3",42950,43],
        ["",5163000,"$5m","Europe","2017-4-27",42852,39],
        ["",5190341,"$5m","Europe","2017-11-6",43045,46],
        ["",5244313,"$5m","Europe","2017-11-15",43054,46],
        ["",5387300,"$5m","Europe","2017-11-28",43067,46],
        ["",5730236,"$6m","Europe","2017-11-30",43069,46],
        ["",5736744,"$6m","Europe","2017-11-15",43054,46],
        ["",5746191,"$6m","Europe","2017-6-30",42916,41],
        ["",5760610,"$6m","Europe","2017-9-30",43008,44],
        ["",5796336,"$6m","Europe","2017-10-31",43039,45],
        ["",6049621,"$6m","Europe","2017-11-15",43054,46],
        ["",6060151,"$6m","Europe","2017-8-25",42972,43],
        ["",6200000,"$6m","Europe","2017-10-15",43023,45],
        ["",6288571,"$6m","Europe","2017-10-1",43009,45],
        ["",6400000,"$6m","Europe","2014-5-21",41780,4],
        ["",6500000,"$7m","Europe","2016-3-21",42450,26],
        ["",6500000,"$7m","Europe","2017-9-4",42982,44],
        ["",6530266,"$7m","Europe","2017-11-30",43069,46],
        ["",6681385,"$7m","Europe","2017-7-31",42947,42],
        ["",6739907,"$7m","Europe","2017-11-1",43040,46],
        ["",6858251,"$7m","Europe","2017-11-11",43050,46],
        ["",6981328,"$7m","Europe","2017-8-7",42954,43],
        ["",7000000,"$7m","Europe","2017-10-12",43020,45],
        ["",7070000,"$7m","Europe","2017-11-30",43069,46],
        ["",7120690,"$7m","Europe","2017-7-26",42942,42],
        ["",7265655,"$7m","Europe","2017-11-29",43068,46],
        ["",7457518,"$7m","Europe","2017-9-24",43002,44],
        ["",8038827,"$8m","Europe","2017-7-26",42942,42],
        ["",8094403,"$8m","Europe","2017-11-17",43056,46],
        ["",8155000,"$8m","Europe","2017-10-31",43039,45],
        ["",8600000,"$9m","Europe","2016-11-13",42687,34],
        ["",8712049,"$9m","Europe","2017-11-1",43040,46],
        ["",8855329,"$9m","Europe","2017-9-29",43007,44],
        ["",9000000,"$9m","Europe","2017-8-14",42961,43],
        ["",9243927,"$9m","Europe","2017-10-26",43034,45],
        ["",9659455,"$10m","Europe","2017-11-29",43068,46],
        ["",9753126,"$10m","Europe","2017-9-7",42985,44],
        ["",10000000,"$10m","Europe","2017-8-31",42978,43],
        ["",10002847,"$10m","Europe","2017-8-1",42948,43],
        ["",10682516,"$11m","Europe","2016-9-29",42642,32],
        ["",11150000,"$11m","Europe","2017-10-31",43039,45],
        ["",11229460,"$11m","Europe","2017-6-30",42916,41],
        ["",11529000,"$12m","Europe","2017-10-31",43039,45],
        ["",11723036,"$12m","Europe","2017-10-31",43039,45],
        ["",11973554,"$12m","Europe","2017-2-28",42794,37],
        ["",12000000,"$12m","Europe","2017-10-4",43012,45],
        ["",12629296,"$13m","Europe","2017-8-4",42951,43],
        ["",12700000,"$13m","Europe","2017-5-2",42857,40],
        ["",13190000,"$13m","Europe","2017-8-2",42949,43],
        ["",13500000,"$14m","Europe","2017-9-22",43000,44],
        ["",14387103,"$14m","Europe","2017-9-30",43008,44],
        ["",14400000,"$14m","Europe","2017-5-30",42885,40],
        ["",14806405,"$15m","Europe","2017-5-12",42867,40],
        ["Ignis",15000000,"$15m","Europe","2017-11-4",43043,46],
        ["Tokens.net",15000000,"$15m","Europe","2017-11-26",43065,46],
        ["MediBloc",15769686,"$16m","Europe","2017-11-26",43065,46],
        ["Wolk",15826996,"$16m","Europe","2017-10-31",43039,45],
        ["Populous",16046945,"$16m","Europe","2017-8-16",42963,43],
        ["Exscudo",16342093,"$16m","Europe","2017-5-31",42886,40],
        ["Waves",16436095,"$16m","Europe","2017-5-31",42886,40],
        ["Dao Casino",16485171,"$16m","Europe","2017-7-26",42942,42],
        ["Cofoundit",16939593,"$17m","Europe","2017-10-10",43018,45],
        ["Cindicator",16945345,"$17m","Europe","2017-10-12",43020,45],
        ["UQUID",17789290,"$18m","Europe","2017-11-10",43049,46],
        ["Cryptopay",18148220,"$18m","Europe","2017-10-30",43038,45],
        ["Ethereum",18500000,"$19m","Europe","2014-9-2",41884,8],
        ["Crypterium",18529875,"$19m","Europe","2017-11-7",43046,46],
        ["uooMAG",20000000,"$20m","Europe","2017-9-30",43008,44],
        ["RMC",20000000,"$20m","Europe","2017-11-15",43054,46],
        ["Aventus",21105251,"$21m","Europe","2017-9-13",42991,44],
        ["UTRUST",21375000,"$21m","Europe","2017-11-20",43059,46],
        ["BlockV",21933081,"$22m","Europe","2017-10-25",43033,45],
        ["Pillar",22000000,"$22m","Europe","2017-7-21",42937,42],
        ["Aragon",25000000,"$25m","Europe","2017-5-17",42872,40],
        ["Monaco",25000000,"$25m","Europe","2017-6-18",42904,41],
        ["Eidoo",25011534,"$25m","Europe","2017-10-31",43039,45],
        ["Kick Coin",26942917,"$27m","Europe","2017-9-29",43007,44],
        ["Delta",30000000,"$30m","Europe","2017-8-18",42965,43],
        ["Streamr",30000000,"$30m","Europe","2017-10-26",43034,45],
        ["Pindex",30000000,"$30m","Europe","2017-11-30",43069,46],
        ["Blackmoon",30000202,"$30m","Europe","2017-10-12",43020,45],
        ["Polybius",31650000,"$32m","Europe","2017-7-6",42922,42],
        ["Unikoin Gold",32155800,"$32m","Europe","2017-10-23",43031,45],
        ["Ambrosus",32507330,"$33m","Europe","2017-10-22",43030,45],
        ["Stox",33350320,"$33m","Europe","2017-8-16",42963,43],
        ["Request Network",33964000,"$34m","Europe","2017-10-17",43025,45],
        ["AirSwap",36000000,"$36m","Europe","2017-10-11",43019,45],
        ["Monetha",37000000,"$37m","Europe","2017-9-30",43008,44],
        ["Raiden",37969268,"$38m","Europe","2017-11-18",43057,46],
        ["Aeternity",38000000,"$38m","Europe","2017-6-19",42905,41],
        ["Electroneum",40000000,"$40m","Europe","2017-10-31",43039,45],
        ["SONM",42000000,"$42m","Europe","2017-7-15",42931,42],
        ["MobileGo",53070000,"$53m","Europe","2017-5-25",42880,40],
        ["Dom Raider",67200000,"$67m","Europe","2017-10-11",43019,45],
        ["Status",109488000,"$109m","Europe","2017-7-4",42920,42],
        ["Polkadot",120602813,"$121m","Europe","2017-10-27",43035,45],
        ["Tezos",235695927,"$236m","Europe","2017-7-14",42930,42],
        ["",306337,"$306k","Middle East","2017-10-19",43027,45],
        ["",595403,"$595k","Middle East","2017-8-11",42958,43],
        ["",740500,"$741k","Middle East","2015-2-4",42039,13],
        ["",1510000,"$2m","Middle East","2017-9-10",42988,44],
        ["",2771455,"$3m","Middle East","2017-10-13",43021,45],
        ["",4701400,"$5m","Middle East","2016-10-19",42662,33],
        ["",7731040,"$8m","Middle East","2017-10-31",43039,45],
        ["CoinDash",20000000,"$20m","Middle East","2017-8-17",42964,43],
        ["Bancor",153245073,"$153m","Middle East","2017-6-25",42911,41],
        ["",100000,"$100k","NA","2016-12-1",42705,35],
        ["",102815,"$103k","NA","2017-9-21",42999,44],
        ["",103802,"$104k","NA","2017-9-19",42997,44],
        ["",106034,"$106k","NA","2017-11-2",43041,46],
        ["",107121,"$107k","NA","2017-10-21",43029,45],
        ["",116412,"$116k","NA","2017-11-30",43069,46],
        ["",117663,"$118k","NA","2017-9-26",43004,44],
        ["",125295,"$125k","NA","2017-10-25",43033,45],
        ["",126208,"$126k","NA","2017-4-10",42835,39],
        ["",138132,"$138k","NA","2017-11-9",43048,46],
        ["",140000,"$140k","NA","2016-10-27",42670,33],
        ["",141974,"$142k","NA","2017-6-27",42913,41],
        ["",147092,"$147k","NA","2017-9-22",43000,44],
        ["",155827,"$156k","NA","2017-11-19",43058,46],
        ["",162509,"$163k","NA","2017-7-17",42933,42],
        ["",162979,"$163k","NA","2017-9-5",42983,44],
        ["",165421,"$165k","NA","2017-9-14",42992,44],
        ["",167604,"$168k","NA","2017-8-25",42972,43],
        ["",171427,"$171k","NA","2017-10-31",43039,45],
        ["",175208,"$175k","NA","2017-10-15",43023,45],
        ["",177580,"$178k","NA","2017-10-21",43029,45],
        ["",180000,"$180k","NA","2017-4-11",42836,39],
        ["",183589,"$184k","NA","2017-9-8",42986,44],
        ["",190000,"$190k","NA","2017-3-30",42824,38],
        ["",191856,"$192k","NA","2016-9-1",42614,32],
        ["",219634,"$220k","NA","2017-8-15",42962,43],
        ["",225690,"$226k","NA","2017-9-25",43003,44],
        ["",229600,"$230k","NA","2017-11-30",43069,46],
        ["",238314,"$238k","NA","2017-11-30",43069,46],
        ["",250000,"$250k","NA","2017-5-19",42874,40],
        ["",258163,"$258k","NA","2017-10-31",43039,45],
        ["",294120,"$294k","NA","2017-8-24",42971,43],
        ["",297414,"$297k","NA","2017-6-26",42912,41],
        ["",300000,"$300k","NA","2016-12-28",42732,35],
        ["",300000,"$300k","NA","2017-7-30",42946,42],
        ["",345500,"$346k","NA","2017-2-26",42792,37],
        ["",356027,"$356k","NA","2017-10-2",43010,45],
        ["",358648,"$359k","NA","2017-8-22",42969,43],
        ["",367078,"$367k","NA","2017-2-27",42793,37],
        ["",370000,"$370k","NA","2014-8-16",41867,7],
        ["",380008,"$380k","NA","2017-8-10",42957,43],
        ["",384419,"$384k","NA","2017-3-27",42821,38],
        ["",394620,"$395k","NA","2017-2-28",42794,37],
        ["",400000,"$400k","NA","2017-5-23",42878,40],
        ["",420000,"$420k","NA","2016-8-19",42601,31],
        ["",430000,"$430k","NA","2016-5-2",42492,28],
        ["",450000,"$450k","NA","2017-10-22",43030,45],
        ["",462000,"$462k","NA","2016-12-22",42726,35],
        ["",500000,"$500k","NA","2014-8-31",41882,7],
        ["",500000,"$500k","NA","2016-4-1",42461,27],
        ["",538159,"$538k","NA","2017-9-25",43003,44],
        ["",540000,"$540k","NA","2014-12-3",41976,11],
        ["",543424,"$543k","NA","2017-11-30",43069,46],
        ["",548358,"$548k","NA","2017-9-30",43008,44],
        ["",560000,"$560k","NA","2016-7-7",42558,30],
        ["",562450,"$562k","NA","2017-11-30",43069,46],
        ["",590000,"$590k","NA","2015-2-21",42056,13],
        ["",603993,"$604k","NA","2017-11-2",43041,46],
        ["",609685,"$610k","NA","2017-11-25",43064,46],
        ["",612151,"$612k","NA","2017-10-25",43033,45],
        ["",640627,"$641k","NA","2017-11-29",43068,46],
        ["",690700,"$691k","NA","2017-11-30",43069,46],
        ["",696916,"$697k","NA","2017-10-31",43039,45],
        ["",718281,"$718k","NA","2017-10-27",43035,45],
        ["",719000,"$719k","NA","2016-8-19",42601,31],
        ["",723984,"$724k","NA","2017-11-26",43065,46],
        ["",750000,"$750k","NA","2017-4-15",42840,39],
        ["",750000,"$750k","NA","2017-11-30",43069,46],
        ["",770000,"$770k","NA","2017-7-9",42925,42],
        ["",778533,"$779k","NA","2017-11-23",43062,46],
        ["",807003,"$807k","NA","2017-10-12",43020,45],
        ["",841350,"$841k","NA","2016-11-28",42702,34],
        ["",849124,"$849k","NA","2016-11-29",42703,34],
        ["",904857,"$1m","NA","2017-11-20",43059,46],
        ["",945000,"$1m","NA","2017-4-26",42851,39],
        ["",955048,"$1m","NA","2017-9-17",42995,44],
        ["",970804,"$1m","NA","2017-8-28",42975,43],
        ["",1005597,"$1m","NA","2017-7-31",42947,42],
        ["",1017204,"$1m","NA","2017-11-11",43050,46],
        ["",1022635,"$1m","NA","2016-12-22",42726,35],
        ["",1045527,"$1m","NA","2017-6-20",42906,41],
        ["",1080000,"$1m","NA","2014-10-11",41923,9],
        ["",1101655,"$1m","NA","2017-9-30",43008,44],
        ["",1136672,"$1m","NA","2017-11-15",43054,46],
        ["",1140949,"$1m","NA","2016-6-24",42545,29],
        ["",1144900,"$1m","NA","2017-11-20",43059,46],
        ["",1152779,"$1m","NA","2017-11-3",43042,46],
        ["",1208526,"$1m","NA","2016-6-22",42543,29],
        ["",1260377,"$1m","NA","2017-10-25",43033,45],
        ["",1261725,"$1m","NA","2017-9-20",42998,44],
        ["",1280940,"$1m","NA","2017-11-27",43066,46],
        ["",1298403,"$1m","NA","2017-11-19",43058,46],
        ["",1304473,"$1m","NA","2017-11-4",43043,46],
        ["",1310000,"$1m","NA","2016-11-24",42698,34],
        ["",1403232,"$1m","NA","2017-4-15",42840,39],
        ["",1507910,"$2m","NA","2017-10-31",43039,45],
        ["",1515034,"$2m","NA","2017-6-10",42896,41],
        ["",1535893,"$2m","NA","2017-11-28",43067,46],
        ["",1573699,"$2m","NA","2017-9-26",43004,44],
        ["",1721229,"$2m","NA","2017-10-15",43023,45],
        ["",1753698,"$2m","NA","2017-11-12",43051,46],
        ["",1783913,"$2m","NA","2017-7-15",42931,42],
        ["",1813179,"$2m","NA","2014-2-3",41673,1],
        ["",2000000,"$2m","NA","2016-9-8",42621,32],
        ["",2063314,"$2m","NA","2017-10-30",43038,45],
        ["",2260552,"$2m","NA","2017-11-30",43069,46],
        ["",2277615,"$2m","NA","2017-9-30",43008,44],
        ["",2279750,"$2m","NA","2016-12-15",42719,35],
        ["",2280000,"$2m","NA","2017-10-8",43016,45],
        ["",2300000,"$2m","NA","2017-7-27",42943,42],
        ["",2395765,"$2m","NA","2017-10-30",43038,45],
        ["",2409540,"$2m","NA","2014-10-23",41935,9],
        ["",2450226,"$2m","NA","2017-9-26",43004,44],
        ["",2474160,"$2m","NA","2017-11-17",43056,46],
        ["",2495000,"$2m","NA","2016-12-16",42720,35],
        ["",2500000,"$3m","NA","2017-6-25",42911,41],
        ["",2500000,"$3m","NA","2017-8-20",42967,43],
        ["",2614283,"$3m","NA","2016-7-30",42581,30],
        ["",2655000,"$3m","NA","2017-11-30",43069,46],
        ["",2733184,"$3m","NA","2017-6-30",42916,41],
        ["",3503280,"$4m","NA","2017-10-8",43016,45],
        ["",3573834,"$4m","NA","2016-11-10",42684,34],
        ["",3690527,"$4m","NA","2017-6-26",42912,41],
        ["",3709011,"$4m","NA","2014-8-21",41872,7],
        ["",3765445,"$4m","NA","2017-7-21",42937,42],
        ["",3888880,"$4m","NA","2017-8-31",42978,43],
        ["",4122708,"$4m","NA","2017-5-15",42870,40],
        ["",4165912,"$4m","NA","2017-11-10",43049,46],
        ["",4200000,"$4m","NA","2017-5-24",42879,40],
        ["",4554000,"$5m","NA","2017-5-26",42881,40],
        ["",4928107,"$5m","NA","2017-10-31",43039,45],
        ["",4972669,"$5m","NA","2017-10-29",43037,45],
        ["",5000000,"$5m","NA","2017-11-22",43061,46],
        ["",5014661,"$5m","NA","2017-9-20",42998,44],
        ["",5072823,"$5m","NA","2017-9-13",42991,44],
        ["",5434124,"$5m","NA","2017-11-1",43040,46],
        ["",5558309,"$6m","NA","2017-4-4",42829,39],
        ["",5817475,"$6m","NA","2017-10-31",43039,45],
        ["",5950255,"$6m","NA","2017-8-27",42974,43],
        ["",6060000,"$6m","NA","2017-8-31",42978,43],
        ["",6899949,"$7m","NA","2017-10-25",43033,45],
        ["",7022930,"$7m","NA","2017-11-21",43060,46],
        ["",7971964,"$8m","NA","2017-6-11",42897,41],
        ["The DAO",168000000,"$168m","NA","2016-5-28",42518,28],
        ["",100000,"$100k","North America","2016-8-28",42610,31],
        ["",105369,"$105k","North America","2017-9-28",43006,44],
        ["",108447,"$108k","North America","2017-10-16",43024,45],
        ["",153511,"$154k","North America","2017-10-30",43038,45],
        ["",161904,"$162k","North America","2017-9-20",42998,44],
        ["",207576,"$208k","North America","2017-10-31",43039,45],
        ["",209073,"$209k","North America","2017-6-11",42897,41],
        ["",227328,"$227k","North America","2017-8-12",42959,43],
        ["",250000,"$250k","North America","2017-1-16",42751,36],
        ["",313427,"$313k","North America","2017-7-27",42943,42],
        ["",314700,"$315k","North America","2017-9-21",42999,44],
        ["",361826,"$362k","North America","2017-4-30",42855,39],
        ["",390719,"$391k","North America","2017-8-31",42978,43],
        ["",447379,"$447k","North America","2017-9-30",43008,44],
        ["",460633,"$461k","North America","2017-10-20",43028,45],
        ["",539294,"$539k","North America","2015-5-14",42138,16],
        ["",556952,"$557k","North America","2017-8-31",42978,43],
        ["",570000,"$570k","North America","2017-10-1",43009,45],
        ["",706302,"$706k","North America","2017-9-1",42979,44],
        ["",793800,"$794k","North America","2014-7-19",41839,6],
        ["",875000,"$875k","North America","2017-6-9",42895,41],
        ["",920000,"$1m","North America","2017-7-6",42922,42],
        ["",1000000,"$1m","North America","2016-12-12",42716,35],
        ["",1080000,"$1m","North America","2017-5-24",42879,40],
        ["",1105265,"$1m","North America","2017-9-20",42998,44],
        ["",1294900,"$1m","North America","2017-7-18",42934,42],
        ["",1687637,"$2m","North America","2017-10-1",43009,45],
        ["",1717455,"$2m","North America","2017-10-21",43029,45],
        ["",2000000,"$2m","North America","2017-5-20",42875,40],
        ["",2695596,"$3m","North America","2017-8-11",42958,43],
        ["",2813147,"$3m","North America","2017-11-22",43061,46],
        ["",3433739,"$3m","North America","2017-11-11",43050,46],
        ["",3470774,"$3m","North America","2017-4-28",42853,39],
        ["",3554908,"$4m","North America","2017-11-24",43063,46],
        ["",4000000,"$4m","North America","2017-2-13",42779,37],
        ["",4047929,"$4m","North America","2017-8-7",42954,43],
        ["",4162750,"$4m","North America","2017-9-14",42992,44],
        ["",4462473,"$4m","North America","2017-11-15",43054,46],
        ["",4500000,"$5m","North America","2017-5-15",42870,40],
        ["",4500000,"$5m","North America","2017-11-30",43069,46],
        ["",4860000,"$5m","North America","2017-11-15",43054,46],
        ["",5276158,"$5m","North America","2017-10-28",43036,45],
        ["",5279400,"$5m","North America","2017-4-14",42839,39],
        ["",5300000,"$5m","North America","2015-10-1",42278,21],
        ["",5500000,"$6m","North America","2016-9-26",42639,32],
        ["",7139883,"$7m","North America","2017-8-18",42965,43],
        ["",7200000,"$7m","North America","2017-6-3",42889,41],
        ["",7702609,"$8m","North America","2016-10-29",42672,33],
        ["",7798042,"$8m","North America","2017-6-27",42913,41],
        ["",9000000,"$9m","North America","2017-7-8",42924,42],
        ["",10210256,"$10m","North America","2017-5-10",42865,40],
        ["",10485538,"$10m","North America","2017-11-25",43064,46],
        ["",11158215,"$11m","North America","2017-10-27",43035,45],
        ["",11276073,"$11m","North America","2017-7-14",42930,42],
        ["",11940597,"$12m","North America","2017-6-26",42912,41],
        ["",12128172,"$12m","North America","2017-8-30",42977,43],
        ["",12485000,"$12m","North America","2017-4-24",42849,39],
        ["",13000000,"$13m","North America","2017-11-22",43061,46],
        ["",13650946,"$14m","North America","2017-11-3",43042,46],
        ["",13658903,"$14m","North America","2017-11-17",43056,46],
        ["",13800000,"$14m","North America","2017-9-17",42995,44],
        ["",14068958,"$14m","North America","2017-5-26",42881,40],
        ["",14374010,"$14m","North America","2017-9-16",42994,44],
        ["",14608797,"$15m","North America","2017-8-19",42966,43],
        ["Plexcoin",15000000,"$15m","North America","2017-10-1",43009,45],
        ["Airtoken",15000000,"$15m","North America","2017-10-20",43028,45],
        ["Sense",15000000,"$15m","North America","2017-11-6",43045,46],
        ["Storm",16703334,"$17m","North America","2017-9-14",42992,44],
        ["Propy",16739338,"$17m","North America","2017-9-15",42993,44],
        ["Cosmos",17160118,"$17m","North America","2017-4-6",42831,39],
        ["Giga Watt",20218239,"$20m","North America","2017-7-31",42947,42],
        ["RvT",20243845,"$20m","North America","2017-9-10",42988,44],
        ["Po.et",20255981,"$20m","North America","2017-9-8",42986,44],
        ["Aion",23010994,"$23m","North America","2017-11-24",43063,46],
        ["0x Protocol",24000000,"$24m","North America","2017-8-20",42967,43],
        ["ATB",24000000,"$24m","North America","2017-9-15",42993,44],
        ["Tierion",26649210,"$27m","North America","2017-8-18",42965,43],
        ["Paypie",26765100,"$27m","North America","2017-11-15",43054,46],
        ["Centra",29454834,"$29m","North America","2017-10-5",43013,45],
        ["Storj",30000000,"$30m","North America","2017-6-19",42905,41],
        ["Quantstamp",31320000,"$31m","North America","2017-11-22",43061,46],
        ["ChainLink",32000000,"$32m","North America","2017-10-19",43027,45],
        ["Civic",33000000,"$33m","North America","2017-6-28",42914,41],
        ["Ether Party",33571350,"$34m","North America","2017-10-31",43039,45],
        ["BAT Token",35725000,"$36m","North America","2017-5-31",42886,40],
        ["Peerbanks",42590100,"$43m","North America","2017-9-22",43000,44],
        ["Gridplus",43000000,"$43m","North America","2017-11-12",43051,46],
        ["Enigma",45000000,"$45m","North America","2017-10-11",43019,45],
        ["SALT",48500000,"$49m","North America","2017-8-22",42969,43],
        ["Blockstack",52000000,"$52m","North America","2017-11-20",43059,46],
        ["WAX",80000000,"$80m","North America","2017-11-29",43068,46],
        ["Kin",98702804,"$99m","North America","2017-9-26",43004,44],
        ["Paragon",183000000,"$183m","North America","2017-10-16",43024,45],
        ["EOS",200000000,"$200m","North America","2017-7-15",42931,42],
        ["Filecoin",257120000,"$257m","North America","2017-9-10",42988,44],
        ["",154800,"$155k","Oceania","2017-10-31",43039,45],
        ["",203427,"$203k","Oceania","2017-9-25",43003,44],
        ["",590760,"$591k","Oceania","2017-11-20",43059,46],
        ["",991401,"$1m","Oceania","2017-10-30",43038,45],
        ["",1100000,"$1m","Oceania","2017-1-4",42739,36],
        ["",5062069,"$5m","Oceania","2017-8-31",42978,43],
        ["",5282235,"$5m","Oceania","2017-9-14",42992,44],
        ["",5400000,"$5m","Oceania","2017-2-15",42781,37],
        ["",10198949,"$10m","Oceania","2017-11-9",43048,46],
        ["Centrality",15000000,"$15m","Oceania","2017-10-3",43011,45],
        ["Power Ledger",34000000,"$34m","Oceania","2017-10-6",43014,45],
        ["",416988,"$417k","South America","2017-11-30",43069,46],
        ["",4829000,"$5m","South America","2017-11-24",43063,46],
        ["Sinergia",16785772,"$17m","South America","2017-11-29",43068,46],
        ["Moeda",19628888,"$20m","South America","2017-9-5",42983,44],
        ["Ripio",31000000,"$31m","South America","2017-10-18",43026,45],
        ["Decentraland",31167456,"$31m","South America","2017-9-17",42995,44]
    ];

    var mototals = [0,1813179,0,0,6400000,0,793800,4579011,18500000,3489540,0,540000,0,1330500,0,860405,539294,0,0,0,532900,5300000,0,585285,300000,0,12000000,500000,170837901,2349475,3849283,11009367,25883772,12723977,19929976,7909385,5824000,22480752,7264419,78382068,267912407,390298671,1026943497,534764634,967448196,1390280328,1361461613];


    //["",500000000,"","NONE","2020-9-17",52995]

    var margin = {
        top: 36,
        right: 0,
        bottom: 80,
        left: 20
    };



    var width = 1300 - margin.left - margin.right,
        height = 700 - margin.bottom - margin.top,
        padding = 3, //6,//3, // separation between same-color nodes
        clusterPadding = 8, //12,//8, // separation between different-color nodes
        maxRadius = 12;

    var chartWidth = width*0.71;
    //var adjRight = (width-chartWidth)/2 + chartWidth;
    var adjRight = width - 60;
    var adjDown = height + margin.bottom - 34;
    var adjRightLegend = -margin.left;
    var adjDownLegend = height - 80 + margin.bottom - 160;
    var adjRightText = -margin.left - 4;
    var adjDownText = margin.top - 10;
    var adjRightButton = -margin.left + 14;

    var n = icodata.length, // total number of nodes
        m = 9; // number of distinct clusters

    var barcolor = "rgb(160,160,160)";


    var startdate = 41640; //42370;
    var lastdate = 43070;
    var days = lastdate - startdate;
    var stdtstr = '2014-1-1';
    var stdtarr = [2014,0,1];
    var months = 23 + 24;

    var color = d3.scale.category10()
        .domain(d3.range(m));

    // The largest node for each cluster.
    var clusters = new Array(m);

    var nn = 0;

    var totalRaise = 0;

    var runningTotal = 0;
    var monthTotal = [];
    monthTotal[0] = 0;
    var minrad = 16;

    var slideScale = d3.time.scale()
        .domain([0,699])
        .range([50, width/2]);


    var barHeight = d3.scale.linear()
        .domain([0,1500000000])
        .range([0,300]);

    var formatDate = d3.time.format("%d %b %y");

    var cont = {
        "Africa":4,
        "Asia":2,
        "Caribbean":3,
        "Europe":0,
        "Middle East":5,
        "North America":1,
        "Oceania":7,
        "South America":8,
        "NA":6,
        "NONE":-1
    };



    var currentdate = new Date(stdtarr[0],stdtarr[1],stdtarr[2]);

    //var testdate = new Date(stdtarr[0],stdtarr[1],stdtarr[2]);




    var nodes = d3.range(n).map(function() {
        var thisindx = nn++;
        var i = cont[icodata[thisindx][3]];
        var r = 1; //Math.sqrt(Math.log(Math.random())) * maxRadius,
        var radTemp = 1.62*Math.sqrt(icodata[thisindx][1])/400;
        d = {cluster: i, radius: 0};
        d.radius1 = radTemp*0.5;
        d.radius2 = radTemp;
        d.label = icodata[thisindx][0];
        d.id = "node" + thisindx;
        d.amt = icodata[thisindx][2];
        d.amtNum = icodata[thisindx][1];
        d.datestr = icodata[thisindx][4];
        d.date = icodata[thisindx][5];
        d.dateidx = icodata[thisindx][6];
        if (!clusters[i] || (radTemp > clusters[i].radius2)) clusters[i] = d;

        /*
        if (icodata[thisindx][3] == "NONE") {
            d.radius = d.radius2;
        }
        */

        totalRaise = totalRaise + icodata[thisindx][1];
        return d;
    });

    var packobj = d3.layout.pack()
        .sort(null)
        .size([width, height])
        .children(function(d) { return d.values; })
        .value(function(d) { return d.radius * d.radius; })
        .nodes({values: d3.nest()
            .key(function(d) { return d.cluster; })
            .entries(nodes)});

    var svg = d3.select("svg")
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var force = d3.layout.force()
        .nodes(nodes)
        .size([width, height])
        .gravity(.02)
        .charge(0)
        //.friction(0.9)
        .on("tick", tick)
        .start();

    var node = svg.selectAll(".nodeclass")
        .data(nodes)
        .enter().append("g")
        .call(force.drag);

    var nodecircle = node
        .selectAll("circle")
        .data(function(d) {return [d];})
        .enter().append("circle")
        .attr("class","bub")
        .style("fill", function(d) {
            if (d.cluster == 7) return color(9);
            return color(d.cluster);
        });

    var amod = 1;


    //svg.append("text").text("Four Years of Initial Coin Offerings").attr("class","titletext tt ttop").attr("x",width/2 - margin.left/2 + margin.right/2 + 10).attr("y",adjDownText-30).style("fill","white").style("font-size","30px").style("font-weight","200");

    svg.append("text").text("Total fundraising").attr("class","tt titletext").attr("x",130+adjRightText).attr("y",adjDownText-16).style("fill","gray");
    var rtotal = svg.append("text").text("$0").attr("class","tt rtotal").attr("x",130+adjRightText).attr("y",adjDownText+20).style("fill","gray");

    node
        /*
        .filter(function(d){
            if (d.radius >= minrad) return true;
            return false;
        })
        */
        .append("text")
        .selectAll("tspan")
        .data(function(d) {
            var spl = d.label.split(" ");
            spl.push(d.amt);
            var ddd = [];
            spl.forEach(function(elem){

                var fontsize = 11 + Math.pow(d.amtNum,0.5) / 1600;
                fontsize = Math.round(fontsize);
                var dateidx = d.date - startdate;
                ddd.push({label: elem, rows: spl.length, radius: d.radius2, date: d.date, fontsize: fontsize, dateidx: dateidx});
            });

            return ddd;

        })
        .enter().append("tspan")
        .attr("x", 0)
        .attr("y", function(d, i, nodes) {
            if ((i+1) == d.rows) {
                //var fontsize = Math.min(Math.max(d.radius*1.5,10),18);
                //var adj = (fontsize - 10)/2;
                return d.fontsize + (i - d.rows / 2 - 0.5) * d.fontsize*0.9 + 4;
            } else {
                return d.fontsize + (i - d.rows / 2 - 0.5) * d.fontsize*0.9 + 2;
            }
        })
        .attr("class",function(d,i){
            if ((i+1) == d.rows) {
                return "tokenprice";
            } else {
                return "tokenname"
            }
        })
        .style("font-size",function(d,i){

            if ((i+1) == d.rows) {
                return Math.round(d.fontsize*1.1) + "px";
            } else {
                return d.fontsize + "px";
            }

        })
        .text(function(d) {
            //return "";
            if (d.radius >= minrad) return d.label;
            else return "";
        })
        .style("display","none");




    var pause = false;

    var ticklength = 50;
    var start = new Date().getTime();
    start = Math.trunc(start/ticklength);
    var current = 0;
    var currentMonth = currentdate.getMonth();
    var currentMoIdx = 0;

    var currentBar;

    var isready = true;

    function moveit(timestamp){
        //console.log("moveit:",isready,pause);
        if (pause) {
            isready = true;
            //amod = 0.01;
            return;
        }
        if (!isready) {
            return requestAnimationFrame(function(timestamp){ // call requestAnimationFrame again with parameters
                return moveit(timestamp);
            });
        }
        isready = false;

        //var timestamp = timestamp || new Date().getTime();
        var timestamp = new Date().getTime();

        var ms100 = Math.trunc(timestamp/ticklength) - start;

        if (ms100 - current >= 2) {
            ms100 = current + 1;
            //timestamp = (ms100 + start)*ticklength;
            //timestamp/ticklength = ms100 + start;
            start = ms100 - timestamp/ticklength;
        }

        if (ms100 > current) {

            currentdate.setDate(currentdate.getDate() + 1);

            if (currentdate.getMonth() !== currentMonth) {
               // FINAL TRANSITION
                d3.select(".bar" + currentMoIdx).transition();
                d3.select(".bar" + currentMoIdx)
                    .transition().duration(ticklength*0.8)
                    .attr("height",function(d){
                        return barHeight(mototals[currentMoIdx]);
                    })
                    .attr("y",function(d){
                        return adjDown - barHeight(mototals[currentMoIdx]) - 2;
                    });

                currentMonth = currentdate.getMonth();
                currentMoIdx++;
                monthTotal[currentMoIdx] = 0;

            }

            grow(current,currentMoIdx);


            brush.extent([currentdate, currentdate]);


            d3.select(".bar" + currentMoIdx)
                .transition().duration(ticklength*0.8)
                .attr("height",function(d){
                    return barHeight(monthTotal[currentMoIdx]);
                })
                .attr("y",function(d){
                    return adjDown - barHeight(monthTotal[currentMoIdx]) - 2;
                });



            handle.attr("transform", "translate(" + timeScale(currentdate) + ",0)");

            var datedisplay = currentdate;
            if (datedisplay.getMonth() == 11 && datedisplay.getYear() == 117) datedisplay = new Date(2017,10,30);
            if (datedisplay.getYear() > 117) datedisplay = new Date(2017,10,30);

            handle.select('text').text(formatDate(datedisplay));

            current = ms100;

            runningTotal = cumulative[current];
            if (runningTotal !== 0 && !runningTotal) runningTotal = cumulative[cumulative.length-1];

            var toDisplay = d3.format(",")(Math.round(runningTotal));
            rtotal.text("$" + toDisplay);

            //slideScale()

            //force.alpha(0.01).start();

        }

        //if (current <= (days+1)) {
            if (pause) {
                isready = true;
                return;
            }
            if (currentdate.getMonth() == 11 && currentdate.getYear() == 117 && currentdate.getMonth() > 3) {
                isready = true;
                console.log("STOP - HAS REACHED FINAL DATE");
                return;
            }
            requestAnimationFrame(function(timestamp){ // call requestAnimationFrame again with parameters
                isready = true;
                moveit(timestamp);
            });
        //}

    }

    setTimeout(function(){

        pause=false;
        current = 0;
        currentMonth = currentdate.getMonth();
        currentMoIdx = 0;
        start = new Date().getTime();
        start = Math.trunc(start/ticklength);
        requestAnimationFrame(function(timestamp){
            moveit(timestamp);
        });

    },2000);



    var damp = 0.9;


    function tick(e) {

        if (force.alpha() > 0.3) {
            force.alpha(0.3);
            e.alpha = 0.3;
        }

        //console.log("e.alpha:",e.alpha);

        node
            //.each(cluster(10 * e.alpha * e.alpha))
            .each(cluster(10 * e.alpha * e.alpha))
            //.each(cluster(0.01))
            .each(collide(.5))
            //.each(collide(.001))
            .attr("transform", function(d) {
                d.x = Math.max(d.radius, Math.min(width - d.radius, d.x));
                d.y = Math.max(d.radius, Math.min(height - d.radius, d.y));

                //d.x = d.x*damp;
                //d.y = d.y*damp;



                return "translate(" + d.x + "," + d.y + ")";
            });


        /*

         node.attr("cx", function(d) { return d.x = Math.max(radius, Math.min(width - radius, d.x)); })
         .attr("cy", function(d) { return d.y = Math.max(radius, Math.min(height - radius, d.y)); });


         node
         .each(cluster(10 * e.alpha * e.alpha))
         .each(collide(.5))
         .attr("cx", function(d) { return d.x; })
         .attr("cy", function(d) { return d.y; });
         */


    }

    // Move d to be adjacent to the cluster node.
    function cluster(alphaIn) {
        alpha = alphaIn*amod;
        return function(d) {
            var cluster = clusters[d.cluster];
            if (cluster === d) return;
            var x = d.x - cluster.x,
                y = d.y - cluster.y,
                l = Math.sqrt(x * x + y * y),
                r = d.radius + cluster.radius;
            if (l != r) {
                l = (l - r) / l * alpha;
                d.x -= x *= l;
                d.y -= y *= l;
                cluster.x += x;
                cluster.y += y;
            }
        };
    }

    // Resolves collisions between d and all other circles.
    function collide(alpha) {
        var quadtree = d3.geom.quadtree(nodes);
        return function(d) {
            if (d.radius == 0) return false;
            var r = d.radius + maxRadius + Math.max(padding, clusterPadding),
                nx1 = d.x - r,
                nx2 = d.x + r,
                ny1 = d.y - r,
                ny2 = d.y + r;
            quadtree.visit(function(quad, x1, y1, x2, y2) {
                if (quad.point && (quad.point !== d)) {
                    if (quad.point.radius == 0) return false;
                    var x = d.x - quad.point.x,
                        y = d.y - quad.point.y,
                        l = Math.sqrt(x * x + y * y),
                        r = d.radius + quad.point.radius + (d.cluster === quad.point.cluster ? padding : clusterPadding);
                    if (l < r) {
                        l = (l - r) / l * alpha;
                        d.x -= x *= l;
                        d.y -= y *= l;
                        quad.point.x += x;
                        quad.point.y += y;
                    }
                }
                return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
            });
        };
    }


    function initLoc(d) {
        var clust = clusters[d.cluster];
        var ang = Math.random()*2*3.1415;
        var newx = Math.sin(ang)*clust.radius + clust.x;
        var newy = Math.cos(ang)*clust.radius + clust.y;

        d.x = newx;
        d.y = newy;
    }

    var grown = false;



    //force.alpha(0.01).start();


    function grow(current,currentMoIdx) {

        //console.log("grow");
        var dur = 800;

        nodecircle
            .filter(function(d){
                //if ((d.date - startdate) == current) {
                if ((d.date - startdate) <= current && d.radius == 0) {
                    runningTotal = runningTotal + d.amtNum;

                    var thisDt = new Date(d.datestr);
                    var thisMoIdx = (thisDt.getYear() - 114)*12 + thisDt.getMonth();

                    //console.log("d.dateidx,currentMoIdx",d.dateidx,currentMoIdx);

                    monthTotal[d.dateidx] = monthTotal[d.dateidx] + d.amtNum;

                    monthTotal[d.dateidx] = Math.min(monthTotal[d.dateidx],mototals[d.dateidx]);

                    return true;
                }
                return false;
            })
            .each(function(d){
                initLoc(d);
            })
            .style("display","inline")
            .transition()
            .duration(dur)
            //.delay(function(d, i) { return i * 5; })
            .attrTween("r", function(d) {
                //var growfact = (1 + Math.random());

                //var i = d3.interpolate(d.radius1, d.radius2);
                var i = d3.interpolate(0, d.radius2);
                return function(t) { return d.radius = i(t); };
            });

        setTimeout(function(current){
            node.select("text").selectAll("tspan")
                .filter(function(d){
                    //console.log(d);
                    if ( (d.date - startdate) <= current) {
                        if ( (d.date - startdate + 2) >= current) {
                            //if ((d.date - startdate + 2) => current)
                            if (d.radius > minrad) {
                                //if ((d.date - startdate) == current && d.radius > minrad) {
                                //var cond1 = (d.date - startdate) == current;
                                //var cond2 = d.radius > 12;
                                //console.log("TEXT TRANSITION: ",cond1,cond2);

                                return true;
                            }
                        }
                    }

                    //if ((d.date - startdate) == current && d.radius > minrad) return true;
                    return false;
                })
                .style("display","block");

        },dur*1.1,current);

        force.alpha(0.05).start();
        force.alpha(0.05);
        //if (current%50 == 48 && current <= (days - 40) && current >= 50) {
        /*
        if (current%30 == 15 && current <= days) {
            force.alpha(0.000015).start();
            force.alpha(0.01);
            console.log("force.alpha(): ",force.alpha());
        }
           */

        //grown = true;
    }

    function growAll(current,currentMoIdx) {

        //console.log("growAll: ",current,currentMoIdx);

        var dur = 400;

        nodecircle.transition();

        nodecircle
            .filter(function(d){
                //if ((d.date - startdate) == current) {
                if ((d.date - startdate) <= current) {

                    d.radius = d.radius2;
                    //monthTotal[d.dateidx] = monthTotal[d.dateidx] + d.amtNum;
                    //monthTotal[d.dateidx] = Math.min(monthTotal[d.dateidx],mototals[d.dateidx]);

                    return true;
                }
                return false;
            })
            .style("display","inline")
            .transition()
            .duration(dur)
            .attr("r", function(d) {
                return d.radius2;
            });

        nodecircle
            .filter(function(d){
                if ((d.date - startdate) > current) {
                    d.radius = 0;

                    //monthTotal[d.dateidx] = monthTotal[d.dateidx] + d.amtNum;
                    //monthTotal[d.dateidx] = Math.min(monthTotal[d.dateidx],mototals[d.dateidx]);

                    return true;
                }
                return false;
            })
            .transition()
            .duration(dur)
            .attr("r", function(d) {
                return 0;
            });


        node.select("text").selectAll("tspan").transition();

        node.select("text").selectAll("tspan")
            .filter(function(d){
                if (d.dateidx > current) return true;
                return false;
            })
            .style("display", "none");

        node.select("text").selectAll("tspan")
            .transition()
            .duration(0)
            .delay(dur)
            .style("display", function(d){
                //console.log("d.dateidx,current:",d.dateidx,current);
                if (d.dateidx <= current) return "block";
                else return "none";
            });


        d3.selectAll(".bars").transition();
        d3.selectAll(".bars")
            .transition().duration(dur/2)
            .attr("height",function(d){
                if (d > currentMoIdx) return barHeight(0);
                return barHeight(mototals[d]);
            })
            .attr("y",function(d){
                if (d > currentMoIdx) return adjDown - barHeight(0) - 2;
                return adjDown - barHeight(mototals[d]) - 2;
            });
        /*
            .attr("height",function(d){
                if (currentMoIdx < d) return barHeight(0);
                return barHeight(mototals[currentMoIdx]);
            })
            .attr("y",function(d){
                if (currentMoIdx < d) return - barHeight(0) - 2;
                return adjDown - barHeight(mototals[currentMoIdx]) - 2;
            });
           */
        /*
        setTimeout(function(current){
            node.select("text").selectAll("tspan")
                .filter(function(d){
                    //console.log(d);
                    if ( (d.date - startdate) <= current) {
                        if ( (d.date - startdate + 2) >= current) {
                            //if ((d.date - startdate + 2) => current)
                            if (d.radius > minrad) {
                                //if ((d.date - startdate) == current && d.radius > minrad) {
                                //var cond1 = (d.date - startdate) == current;
                                //var cond2 = d.radius > 12;
                                //console.log("TEXT TRANSITION: ",cond1,cond2);

                                return true;
                            }
                        }
                    }

                    //if ((d.date - startdate) == current && d.radius > minrad) return true;
                    return false;
                })
                .style("display","block");

        },dur*1.1,current);
        */

        force.alpha(0.06).start();
        force.alpha(0.06);

        /*
        if (current%50 == 48 && current <= (days - 40) && current >= 50) {
            force.alpha(0.01).start();
            force.alpha(0.01);
        }
        */
    }




    var timeScale = d3.time.scale()
        .domain([new Date(stdtarr[0],stdtarr[1],stdtarr[2]), new Date(2017,10,30)])
        .range([0, chartWidth])
        .clamp(true);


    var startValue = timeScale(new Date(stdtarr[0],stdtarr[1],stdtarr[2]));
    startingValue = new Date(stdtarr[0],stdtarr[1],stdtarr[2]);

    var bardata = [];
    var barwid = (timeScale.range()[1] - timeScale.range()[0])/(months-1) - 4;

    var barScale = d3.scale.linear()
        .domain([0, months])
        .range([timeScale.range()[0], timeScale.range()[1]]);

    addBars();

    var brush = d3.svg.brush()
        .x(timeScale)
        .extent([startingValue, startingValue])
        .on("brush", brushed);

    var axisbottom = svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(" + (adjRight-chartWidth) + "," + adjDown + ")")
        .call(d3.svg.axis()
            .scale(timeScale)
            .orient("bottom")
            .tickFormat(function(d) {
                return formatDate(d);
            })
            .tickSize(0)
            .tickPadding(12)
            .tickValues([timeScale.domain()[0], new Date(2015,0,1), new Date(2016,0,1), new Date(2017,0,1), new Date(2017,10,30)])) //timeScale.domain()[1]
        .select(".domain")
        .select(function() {
            return this.parentNode.appendChild(this.cloneNode(true));
        })
        .attr("class", "halo");

    var axiswid = (timeScale.range()[1] - timeScale.range()[0])/(months-1);

    var lineData = [
        0,
        barScale(12),
        barScale(24),
        barScale(36),
        barScale(47)
    ];

    var lineFunction = d3.svg.line()
                             .x(function(d) { return d.x; })
                             .y(function(d) { return d.y; })
                             .interpolate("linear");

    var lineGraph = svg.append("g")
        .attr("transform", "translate(" + (adjRight-chartWidth) + "," + adjDown + ")")
        .selectAll(".tickmark")
        .data(lineData)
        .enter()
        .append("line")
        .attr("x1",function(d){return d;})
        .attr("x2",function(d){return d;})
        .attr("y1",function(d){return 0;})
        .attr("y2",function(d){return 6;})
        .attr("stroke", "white")
        .attr("stroke-width", 1)
        .attr("fill", "none");

    var slider = svg.append("g")
        .attr("class", "slider")
        .call(brush);

    slider.selectAll(".extent,.resize")
        .remove();

    var adjUpHandle = 16;

    slider.select(".background")
 //       .attr("transform", "translate(" + (adjRight-chartWidth) + "," + (adjDown - adjUpHandle) + ")")
        .attr("transform", "translate(" + Math.round(adjRight-chartWidth) + "," + Math.round(adjDown-adjUpHandle-65)+ ")")
        .attr("height", height );

    var handle = slider.append("g")
        .attr("class", "handle");



    handle.append("path")
        .attr("transform", "translate(" + (adjRight-chartWidth) + "," + (adjDown + 0 - adjUpHandle)+ ")")
        .attr("d", "M 0 -30 V 20")
        .style("stroke-width","4px")
        .style("stroke","white");

    handle.append('text')
        .text(startingValue)
        .attr("transform", "translate(" + (adjRight-chartWidth-28) + " ," + (adjDown - 35 - adjUpHandle) + ")");

    slider
        .call(brush.event);

    var myTimeout;

    var firstBrush = 0;

    function brushed() {
        //console.log("Brushed 1");
        if (firstBrush < 2) {
            firstBrush++;
            return;
        }

        //console.log("Brushed 2");
        pause = true;

        var value = brush.extent()[0];

        if (d3.event.sourceEvent) { // not a programmatic event
            value = timeScale.invert(d3.mouse(this)[0] - (adjRight-chartWidth));
            //value = value;
            brush.extent([value, value]);
        }


        var oneday = 1000*60*60*24;

        //.getTime();
        //.getTime();

        currentdate = value;
        currentMonth = currentdate.getMonth();
        currentMoIdx = (currentdate.getYear()-114)*12 + currentdate.getMonth();

        var startdt = new Date(2014,0,1);

        current = Math.trunc((currentdate.getTime() - startdt.getTime())/oneday);

        //console.log(currentMoIdx,currentdate.getDate());


        handle.attr("transform", "translate(" + timeScale(value) + ",0)");

        if (value.getMonth() == 11 && value.getYear() == 117) {
            console.log("too far!");
            value = new Date(2017,10,30);
        }
        if (value.getYear() > 117) value = new Date(2017,10,30);

        handle.select('text').text(formatDate(value));

        growAll(current,currentMoIdx);

        console.log("current,cumulative[current]",current,cumulative[current])

        runningTotal = cumulative[current];
        if (runningTotal !== 0 && !runningTotal) runningTotal = cumulative[cumulative.length-1];

        var toDisplay = d3.format(",")(Math.round(runningTotal));
        rtotal.text("$" + toDisplay);

        clearTimeout(myTimeout);
        myTimeout = setTimeout(function(){
            console.log("****** RESUME");

            for (var j = 0; j < currentMoIdx; j++) {
                monthTotal[j] = mototals[j];
            }

            runningTotal = cumulative[current];
            if (runningTotal !== 0 && !runningTotal) runningTotal = cumulative[cumulative.length-1];

            console.log("current,cumulative[current]: ",current,cumulative[current]);

            var toDisplay = d3.format(",")(Math.round(runningTotal));
            rtotal.text("$" + toDisplay);

            start = (new Date()).getTime();
            start = Math.trunc(start/ticklength);
            start = start - current;
            pause = false;
            force.alpha(0.1).start();
            force.alpha(0.1);
            isready = true;
            requestAnimationFrame(function(timestamp){
                console.log("Request moveit");
                moveit(timestamp);
            });
        },2000);

    }




    function addBars() {

        for (var i = 0; i < months; i++) {
            bardata.push(i);
        }

        svg.selectAll(".bars")
            .data(bardata).enter()
            .append("rect")
            .attr("width", barwid)
            .attr("height", function(d){
                return 0;
            })
            .attr("x",function(d){
                //console.log(d,barScale(d));
                return (adjRight-chartWidth) + barScale(d) + 2;
            })
            .attr("y",function(d){
                return adjDown - 2;
            })
            .attr("class",function(d){
                return "bars bar" + d;
            })
            .style("fill", barcolor)
            .style("stroke-width", 1)
            .style("stroke", barcolor);
    }

    var ldata = [
        {n:0,region:"Europe"},
        {n:1,region:"North America"},
        {n:2,region:"Asia"},
        {n:3,region:"Caribbean"},
        {n:8,region:"South America"},
        {n:9,region:"Oceania"},
        {n:5,region:"Middle East"},
        {n:4,region:"Africa"},
        {n:6,region:"Stateless/Unknown"}
    ];

    var cr = 9;

    var legend = svg.append("g")
        .attr("class","legend")
        .attr("transform", "translate("+adjRightLegend+"," + adjDownLegend + ")");

    legend
        .selectAll(".legendcircle")
        .data(ldata).enter()
        .append("circle")
        .attr("cx",30)
        .attr("cy",function(d,i){
            return (2*cr+4)*i;
        })
        .attr("r",cr)
        .style("fill",function(d){
            return color(d.n);
        });

    legend
        .selectAll(".legendtext")
        .data(ldata).enter()
        .append("text")
        .attr("x",50)
        .attr("y",function(d,i){
            return (2*cr+4)*i + 6;
        })
        .style("text-anchor","start")
        .text(function(d){
            return d.region;
        });


    svg.append("rect")
        .attr("class","mybutton")
        .attr("x",14)
        .attr("y",360)
        .attr("height",30)
        .attr("width",80)
        .style("cursor","pointer")
        .style("color","white")
        .style("fill","rgb(66,133,244)")
        .on("click",function(){

            console.log("****** END");

            pause = true;

            svg.selectAll(".bars").transition();

            svg.selectAll(".bars")
                .transition()
                .duration(1200)
                .delay(200)
                .attr("height", function(d){
                    return 0;
                })
                .attr("y",function(d){
                    return adjDown - 2;
                });

            node.select("text").selectAll("tspan").style("display","none");

            nodecircle.transition();
            nodecircle
                .each(function(d){
                    d.radius = 0;
                });

            nodecircle
                .transition()
                .duration(1000)
                .attr("r",0)
                .transition()
                .duration(10)
                .delay(1200)
                .style("display","none");
            /*
                //.delay(function(d, i) { return i * 5; })
                .attrTween("r", function(d) {
                    //var growfact = (1 + Math.random());

                    var i = d3.interpolate(d.radius2, 0);
                    return function(t) { return i(t); };
                });
            */

            handle.transition();

            currentdate = new Date(2014,0,1);

            //console.log("currentdate: ",currentdate);

            current = 0;
            currentMonth = currentdate.getMonth();
            currentMoIdx = 0;


            for (var j = 0; j < monthTotal.length; j++) {
                monthTotal[j] = 0;
            }

            handle.select('text').text(formatDate(currentdate));

            //console.log(formatDate(currentdate));

            runningTotal = 0;
            var toDisplay = d3.format(",")(Math.round(runningTotal));
            rtotal.text("$" + toDisplay);

            brush.extent([currentdate, currentdate]);

            handle.transition().delay(500).attr("transform", "translate(" + timeScale(currentdate) + ",0)");


            runningTotal = 0;

            /*
            setTimeout(function(){
                force.alpha(0.01).start();
                nodecircle.style("display","none")
            },2000);
            */
            setTimeout(function(){
                //brush.extent([currentdate, currentdate]);
                console.log("****** START OVER");

                force.alpha(0.01).start();

                for (var j = 0; j < monthTotal.length; j++) {
                    monthTotal[j] = 0;
                }

                current = 0;
                currentMonth = currentdate.getMonth();
                currentMoIdx = 0;
                start = new Date().getTime();
                start = Math.trunc(start/ticklength);
                pause = false;
                force.start();
                requestAnimationFrame(function(timestamp){
                    moveit(timestamp);
                });

            },3000);



        });

    svg.append("text")
        //.attr("x",width - 60 + adjRightButton)
        //.attr("y",30)
        .attr("x",14 + 40)
        .attr("y",360 + 22)
        .style("fill","white")
        .style("text-anchor","middle")
        .style("font-size","20px")
        .text("Restart");

    //pause=true;

    /*
    var about = d3.select("svg").append("g")
        .append("rect")
        .style("width","80%")
        .style("height","80%")
        .attr("x","10%")
        .attr("y","10%")
        .style("fill","rgba(255,255,255,0.04)");
       */


    d3.select(".sharetwitter").on("click", function(){
        d3.event.preventDefault();
        //openInNewTab("https://elementus.io/");
        openInNewTab("https://twitter.com/share?text=Four%20years%20of%20initial%20coin%20offerings%2C%20visualized%20in%20one%20graphic&url=https%3A%2F%2Felementus.io%2Ftoken-sales-history&via=elementus_io&original_referer=");
    });

    d3.selectAll(".elemhome").on("click", function(){
        d3.event.preventDefault();
        openInNewTab("https://elementus.io");
    });

    d3.select(".infocircle").on("click", function(){
        d3.event.preventDefault();
        openInNewTab("https://elementus.io/blog/token-sales-visualization/");
    });

    function openInNewTab(url) {
        var win = window.open(url, '_blank');
        win.focus();
    }

    var removed = d3.select("#initialg").remove();
    d3.select("svg").append(function() {
        return removed.node();
    });


    //elemhome
    //infocircle